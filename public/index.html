<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Pocket Terminal</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
</head>
<body>
  <!-- Login Screen -->
  <div id="login-screen" class="screen">
    <div class="login-container">
      <h1>Pocket Terminal</h1>
      <p>Secure Mobile Workspace</p>
      <form id="login-form">
        <input type="password" id="password" placeholder="Access Password" required autocomplete="current-password">
        <button type="submit" class="primary-btn" style="width: 100%; margin-top: 16px;">Unlock</button>
      </form>
      <span id="login-error" class="error-text"></span>
    </div>
  </div>

  <!-- Dashboard Screen -->
  <div id="launcher-screen" class="screen hidden">
    <header class="main-header">
      <div>
        <h2 style="margin:0; font-size: 18px;">Workspace</h2>
        <div style="display: flex; align-items: center; gap: 6px; margin-top: 2px;">
          <span id="status-dot" style="width: 8px; height: 8px; background: var(--success); border-radius: 50%;"></span>
          <span id="status-text" class="text-xs" style="color: var(--text-muted); font-weight: 600;">CONNECTED</span>
        </div>
      </div>
      <button onclick="logout()" style="background: var(--bg-alt); border: 1px solid var(--border); color: var(--text); padding: 8px 12px; border-radius: 10px; font-size: 13px; font-weight: 500;">Logout</button>
    </header>

    <main class="dashboard-content">
      <!-- Project Selection -->
      <section class="panel">
        <span class="panel-title">Active Environment</span>
        <div class="card" style="padding: 0; border: none;">
          <select id="project-select">
            <option value="">Root Project</option>
          </select>
        </div>
      </section>

      <!-- Quick Launch Grid -->
      <section class="panel">
        <span class="panel-title">AI CLI Tools</span>
        <div class="cli-grid">
          <div class="cli-card" onclick="launchCLI('claude-code')">
            <div class="cli-icon icon-claude">C</div>
            <span class="text-sm">Claude</span>
          </div>
          <div class="cli-card" onclick="launchCLI('gemini', ['chat'])">
            <div class="cli-icon icon-gemini">G</div>
            <span class="text-sm">Gemini</span>
          </div>
          <div class="cli-card" onclick="launchCLI('copilot')">
            <div class="cli-icon icon-gpt">P</div>
            <span class="text-sm">Copilot</span>
          </div>
          <div class="cli-card" onclick="launchCLI('grok')">
            <div class="cli-icon icon-grok">x</div>
            <span class="text-sm">Grok</span>
          </div>
        </div>
      </section>

      <!-- Clone Repo -->
      <section class="panel">
        <span class="panel-title">Import Project</span>
        <div class="card" style="display: flex; flex-direction: column; gap: 12px;">
          <input type="text" id="repo-url" placeholder="GitHub Repository URL">
          <input type="password" id="repo-token" placeholder="Personal Access Token (optional)">
          <button id="clone-btn" onclick="cloneRepo()" class="primary-btn">Clone Repository</button>
        </div>
      </section>
    </main>
  </div>

  <!-- Terminal Screen (Overlay) -->
  <div id="terminal-screen" class="screen hidden">
    <div class="terminal-header">
      <div style="display: flex; align-items: center; gap: 10px;">
        <span style="font-size: 14px; font-weight: 600; color: var(--text-muted);">Terminal</span>
        <span id="active-cmd" style="font-size: 12px; padding: 2px 8px; background: var(--bg-alt); border-radius: 4px; color: var(--primary);">bash</span>
      </div>
      <button onclick="closeTerminal()" style="background: var(--error); border: none; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 16px;">âœ•</button>
    </div>
    <div id="terminal-container"></div>
  </div>

  <div id="toast" class="toast hidden"></div>

  <script src="terminal.js"></script>
</body>
</html>